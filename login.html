<!DOCTYPE html>
<html lang="en">
<head>

<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">

<title>Auth - Safe Link</title>

<link rel="icon" href="favicon.png">
<link rel="stylesheet" href="style.css">
<link rel="stylesheet" href="login.css">

</head>
<body>

<!-- ================= LOADER ================= -->
<div id="loader">
    <div class="ecg-wrapper">
        <svg viewBox="0 0 500 100" class="ecg-svg">
            <polyline 
                points="0,50 40,50 60,20 80,80 100,50 140,50 160,30 180,70 200,50 500,50"
                class="ecg-path"/>
        </svg>
    </div>
    <audio id="heartbeatSound"
    src="https://assets.mixkit.co/sfx/preview/mixkit-heart-beat-1055.mp3"
    preload="auto"></audio>
</div>

<!-- ================= TOP NAV ================= -->
<div class="top-nav">
    <div class="nav-left">
        <button class="nav-btn" onclick="toggleSidebar()">â˜°</button>
        <button class="nav-btn" onclick="goHome()">âŒ‚</button>
        <button class="nav-btn">ğŸ”</button>
        <button class="nav-btn">âš™</button>
    </div>

    <div class="nav-right">
        <button class="nav-btn">â¤ï¸</button>
        <button class="nav-btn">âš </button>
        <button class="nav-btn">ğŸ“</button>
        <button class="nav-btn">ğŸ””</button>
        <button class="nav-btn" onclick="goBack()">ğŸ”™</button>
    </div>
</div>

<!-- ================= SIDEBAR ================= -->
<div id="sidebar" class="sidebar">

    <div class="sidebar-header">
        <div class="sidebar-logo">
            <img src="logo.png" alt="Safe Link Logo">
            <div class="logo-text">
                <h2>SAFE LINK</h2>
                <p>Tech Gen</p>
            </div>
        </div>
        <button class="close-btn" onclick="toggleSidebar()">âœ–</button>
    </div>

    <div id="userEmailDisplay" class="user-email"></div>

    <button class="side-btn side-btn-dashboard" style="display:none;" onclick="goDashboard();closeSidebar();">ğŸ“Š Dashboard</button>
    <button class="side-btn side-btn-login" onclick="goLogin();closeSidebar();">ğŸ” Login / Signup</button>
    <button class="side-btn side-btn-logout" style="display:none;" onclick="logoutUser();closeSidebar();">ğŸšª Logout</button>

    <hr style="border:1px solid #222; margin:10px 0;">

    <button class="side-btn" onclick="goHome();closeSidebar();">ğŸ  Home</button>
    <button class="side-btn">ğŸš¨ Emergency without Login</button>
    <button class="side-btn">âš™ Settings</button>
    <button class="side-btn">ğŸ”” Notification</button>
    <button class="side-btn">ğŸ” Search</button>
    <button class="side-btn">â„¹ About</button>
    <button class="side-btn disabled">ğŸŒ Change Language (Coming Soon)</button>
    <button class="side-btn">ğŸ“ Contact Us</button>
    <button class="side-btn">ğŸ’¬ Feedback / Suggestion</button>
    <button class="side-btn">ğŸ“… Meeting</button>
    <button class="side-btn">ğŸ“¢ Report</button>
    <button id="donationBtn" class="side-btn disabled">ğŸ’° Donation</button>

    <div class="sidebar-footer">
        Thank you for using our app â¤ï¸
    </div>

</div>

<!-- ================= AUTH SECTION ================= -->
<div class="auth-container">
    <div class="auth-box">

        <div class="auth-logo">
            <img src="logo.png" alt="Safe Link Logo">
            <h2>SAFE LINK</h2>
            <p>Tech Gen</p>
        </div>

        <div class="auth-toggle">
            <button id="loginTab" onclick="showLogin()">Login</button>
            <button id="signupTab" onclick="showSignup()">Signup</button>
        </div>

        <!-- LOGIN -->
        <div id="loginBlock">

            <input type="email" id="loginEmail" placeholder="Email">
            <input type="password" id="loginPassword" placeholder="Password">

            <div class="captcha-box">
                <span id="loginCaptchaText"></span>
                <button onclick="generateLoginCaptcha()">â†»</button>
            </div>

            <input type="text" id="loginCaptchaInput" placeholder="Enter CAPTCHA">

            <button class="auth-btn" onclick="login()">Login</button>
            <button class="reset-btn" onclick="resetPassword()">Forgot Password?</button>

        </div>

        <!-- SIGNUP -->
        <div id="signupBlock" style="display:none;">

            <input type="email" id="signupEmail" placeholder="Email">
            <input type="password" id="signupPassword" placeholder="Password">

            <div class="strength-meter">
                <div id="strengthBar"></div>
            </div>

            <div class="captcha-box">
                <span id="signupCaptchaText"></span>
                <button onclick="generateSignupCaptcha()">â†»</button>
            </div>

            <input type="text" id="signupCaptchaInput" placeholder="Enter CAPTCHA">

            <button class="auth-btn" onclick="signup()">Create Account</button>

        </div>

        <p id="authMsg"></p>

        <div style="margin-top:15px; font-size:13px;">
            <span style="cursor:pointer; color:#00bfff;" onclick="toggleMailHelp()">
                Mail not received?
            </span>

            <div id="mailHelpBox" style="display:none; margin-top:10px; color:#ccc;">
                Please check your mail's Spam Section.<br><br>
                <button class="side-btn disabled">Contact Us</button>
            </div>
        </div>

    </div>
</div>

<!-- ================= FIREBASE ================= -->
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>

<script>
const firebaseConfig = {
  apiKey: "AIzaSyBYA30tHjQ6sttfJbqlMdJ-T7Ky_UBVjM4",
  authDomain: "safelink-dc5da.firebaseapp.com",
  projectId: "safelink-dc5da",
  storageBucket: "safelink-dc5da.firebasestorage.app",
  messagingSenderId: "1012554783730",
  appId: "1:1012554783730:web:7879c3085943b038ba696b"
};

if (!firebase.apps.length) {
    firebase.initializeApp(firebaseConfig);
}

const auth = firebase.auth();
firebase.auth().setPersistence(firebase.auth.Auth.Persistence.LOCAL)
.catch(function(error){
    console.log("Persistence error:", error);
});
</script>

<script src="options.js"></script>
<script src="login.js"></script>

<script>
function toggleMailHelp(){
    const box=document.getElementById("mailHelpBox");
    box.style.display = box.style.display==="none" ? "block" : "none";
}
</script>

<script src="https://checkout.razorpay.com/v1/checkout.js"></script>

</body>
</html>