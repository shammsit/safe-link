<!DOCTYPE html>
<html lang="en">
<head>

<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">

<title>Profile - Safe Link</title>

<link rel="icon" href="../favicon.png">
<link rel="stylesheet" href="../style.css">
<link rel="stylesheet" href="profile.css">

</head>
<body>

<!-- LOADER -->
<div id="loader">
    <div class="ecg-wrapper">
        <svg viewBox="0 0 500 100" class="ecg-svg">
            <polyline points="0,50 40,50 60,20 80,80 100,50 140,50 160,30 180,70 200,50 500,50"
                class="ecg-path"/>
        </svg>
    </div>
</div>

<!-- ================= TOP NAV ================= -->
<div class="top-nav">
    <div class="nav-left">
        <button class="nav-btn" onclick="toggleSidebar()">â˜°</button>
        <button class="nav-btn" onclick="goHome()">âŒ‚</button>
        <button id="headerProfileBtn" class="nav-btn">ğŸ‘¤</button>
        <button class="nav-btn">ğŸ”</button>
        <button class="nav-btn">âš™</button>
    </div>
    <div class="nav-right">
        <button class="nav-btn">â¤ï¸</button>
        <button class="nav-btn">âš </button>
        <button class="nav-btn">ğŸ“</button>
        <button class="nav-btn">ğŸ””</button>
        <button class="nav-btn" onclick="goBack()">ğŸ”™</button>
    </div>
</div>

<!-- ================= SIDEBAR ================= -->
<div id="sidebar" class="sidebar">
    <div class="sidebar-header">
        <div class="sidebar-logo">
            <img src="../logo.png" alt="Safe Link Logo">
            <div class="logo-text">
                <h2>SAFE LINK</h2>
                <p>Tech Gen</p>
            </div>
        </div>
        <button class="close-btn" onclick="toggleSidebar()">âœ–</button>
    </div>

    <div id="userEmailDisplay" class="user-email"></div>

    <button class="side-btn side-btn-dashboard" onclick="goDashboard();closeSidebar();">ğŸ“Š Dashboard</button>
    <button class="side-btn side-btn-logout" onclick="logoutUser();closeSidebar();">ğŸšª Logout</button>

    <hr style="border:1px solid #222; margin:10px 0;">

<button class="side-btn" onclick="goHome();closeSidebar();">ğŸ  Home</button>
    <button class="side-btn" onclick="goEmergency();closeSidebar();">ğŸš¨ Emergency Alert</button>
    <button class="side-btn">ğŸš¨ Emergency without Login</button>
    <button class="side-btn">âš™ Settings</button>
    <button class="side-btn">ğŸ”” Notification</button>
    <button class="side-btn">ğŸ” Search</button>
    <button class="side-btn">â„¹ About</button>
    <button class="side-btn disabled">ğŸŒ Change Language (Coming Soon)</button>
    <button class="side-btn">ğŸ“ Contact Us</button>
    <button class="side-btn">ğŸ’¬ Feedback / Suggestion</button>
    <button class="side-btn">ğŸ“… Meeting</button>
    <button class="side-btn">ğŸ“¢ Report</button>
    <button id="donationBtn" class="side-btn">ğŸ’° Donation</button>

    <div class="sidebar-footer">
        Thank you for using our app â¤ï¸
    </div>
</div>

<!-- ================= PROFILE CONTENT ================= -->

<div class="profile-wrapper">

<h2>User Profile</h2>

<form id="profileForm">

<!-- EDIT BUTTON (TOP) -->
<div class="btn-group top-edit">
    <button type="button" id="editBtn">Edit</button>
</div>

<!-- PROFILE STATUS -->
<div class="status-box">
    <div class="status-header">
        <span>Profile Completion Status</span>
        <span id="completionPercent">0%</span>
    </div>
    <div class="progress-bar">
        <div id="progressFill"></div>
    </div>

    <div id="verifiedBadge" class="verified-badge hidden">
        âœ” Verified Account
    </div>
</div>

<!-- PHOTO -->
<div class="photo-section">

    <div class="photo-wrapper">
        <img id="profilePreview" alt="User Photo">
        <span id="verificationTag" class="verification-tag unverified">
            Unverified
        </span>
    </div>

    <input type="file" id="profilePhoto">

</div>
<!-- 1. BASIC DETAILS -->
<div class="section-box">
<h3>1. Basic Information</h3>

<div class="form-row">
<label>Full Name:</label>
<input type="text" id="name">

<label>Date of Birth:</label>
<input type="date" id="dob">
</div>

<div class="form-row">
<label>Gender:</label>
<select id="gender">
<option value="">Select</option>
<option>Male</option>
<option>Female</option>
<option>Other</option>
</select>

<label>Mobile Number:</label>
<input type="text" id="mobile">
</div>

<div class="form-row">
<label>Alternate Mobile:</label>
<input type="text" id="altMobile">

<label>Email ID:</label>
<input type="email" id="email" readonly>
</div>

<div class="form-row full">
<label>Address:</label>
<textarea id="address"></textarea>
</div>

<div class="form-row">
<label>Pin Code:</label>
<input type="text" id="pincode">

<label>Occupation:</label>
<input type="text" id="occupation">
</div>

<div class="form-row full">
<label>Qualification:</label>
<input type="text" id="qualification">
</div>

</div>

<!-- 2. GUARDIAN -->
<div class="section-box">
<h3>2. Guardian Details</h3>

<div class="form-row">
<label>Guardian Name:</label>
<input type="text" id="guardianName">

<label>Relation:</label>
<input type="text" id="guardianRelation">
</div>

<div class="form-row">
<label>Guardian Contact:</label>
<input type="text" id="guardianContact">

<label>Guardian Address:</label>
<input type="text" id="guardianAddress">
</div>
</div>

<!-- 3. FATHER -->
<div class="section-box">
<h3>3. Father Details</h3>

<div class="form-row full">
<label><input type="checkbox" id="fatherSame"> Same as Guardian</label>
</div>

<div class="form-row">
<label>Father Name:</label>
<input type="text" id="fatherName">

<label>Father Contact:</label>
<input type="text" id="fatherContact">
</div>

<div class="form-row full">
<label>Father Address:</label>
<textarea id="fatherAddress"></textarea>
</div>
</div>

<!-- 4. MOTHER -->
<div class="section-box">
<h3>4. Mother Details</h3>

<div class="form-row full">
<label><input type="checkbox" id="motherSame"> Same as Guardian</label>
</div>

<div class="form-row">
<label>Mother Name:</label>
<input type="text" id="motherName">

<label>Mother Contact:</label>
<input type="text" id="motherContact">
</div>

<div class="form-row full">
<label>Mother Address:</label>
<textarea id="motherAddress"></textarea>
</div>
</div>

<!-- 5. ID VERIFICATION -->
<div class="section-box">
<h3>5. ID Verification</h3>

<div class="form-row">
<label>ID Type:</label>
<input type="text" id="idType">

<label>ID Number:</label>
<input type="text" id="idNumber">
</div>

<div class="form-row">
<label>Issuance Date:</label>
<input type="date" id="issueDate">

<label>Expiry Date:</label>
<input type="date" id="expiryDate">
</div>
<!-- idcard front and back upload -->
<div class="file-wrapper">
    <input type="file" id="idFront">
    <span id="idFrontDisplay" class="file-display" style="display:none;"></span>
</div>

<div class="file-wrapper">
    <input type="file" id="idBack">
    <span id="idBackDisplay" class="file-display" style="display:none;"></span>
</div>
<!-- 6. CAPTCHA -->
<div class="section-box">
<h3>6. Security Verification</h3>

<div class="captcha-section">
<span id="profileCaptcha"></span>
<button type="button" onclick="generateCaptcha()">Refresh</button>
</div>

<input type="text" id="captchaInput" placeholder="Enter Captcha">
</div>

<!-- SAVE BUTTON (BOTTOM) -->
<div class="btn-group bottom-save">
<button type="button" id="saveBtn" disabled>Save</button>
</div>

</form>
</div>

<!-- FIREBASE -->
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-storage.js"></script>

<script>
const firebaseConfig = {
  apiKey: "AIzaSyBYA30tHjQ6sttfJbqlMdJ-T7Ky_UBVjM4",
  authDomain: "safelink-dc5da.firebaseapp.com",
  projectId: "safelink-dc5da",
  storageBucket: "safelink-dc5da.firebasestorage.app",
  messagingSenderId: "1012554783730",
  appId: "1:1012554783730:web:7879c3085943b038ba696b"
};
</script>

<script src="../options.js"></script>

<!-- ===== Saving Overlay ===== -->
<div id="savingOverlay" class="saving-overlay hidden">
    <div class="saving-box">
        <div class="spinner"></div>
        <p>Please wait, saving data...</p>
        <div class="saving-progress">
            <div id="savingBar"></div>
        </div>
    </div>
</div>

<!-- ===== Toast ===== -->
<div id="toast" class="toast hidden"></div>

<!-- ===== Success Banner ===== -->
<div id="successBanner" class="success-banner hidden">
    Profile Saved Successfully âœ…
</div>
<script src="profile.js"></script>
</body>
</html>